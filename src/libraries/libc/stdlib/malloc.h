/******************************************************************************/
/* src/libraries/libc/stdlib/malloc.h                                         */
/*                                                                 2018/12/23 */
/* Copyright (C) 2018 Mochi.                                                  */
/******************************************************************************/
#ifndef MALLOC_H
#define MALLOC_H
/******************************************************************************/
/* インクルード                                                               */
/******************************************************************************/
/* 共通ヘッダ */
#include <stdbool.h>
#include <stddef.h>
#include <MLib/MLibList.h>


/******************************************************************************/
/* 定義                                                                       */
/******************************************************************************/
/* 割当メモリ領域 */
typedef struct {
    MLibListNode_t node;    /**< ノード情報           */
    size_t         size;    /**< 割当メモリ領域サイズ */
    uint8_t        area[];  /**< ユーザメモリ領域     */
} mallocArea_t;


/******************************************************************************/
/* モジュール内向けグローバル関数宣言                                         */
/******************************************************************************/
/* malloc初期化 */
extern bool MallocInit( void );


/******************************************************************************/
/* グローバル変数宣言                                                         */
/******************************************************************************/
/** ブレイクポイント */
extern void *pgBreakPoint;
/** 未使用メモリ領域リスト */
extern MLibList_t gFreeList;
/** 使用中メモリ領域リスト */
extern MLibList_t gUsedList;


/******************************************************************************/
#endif
