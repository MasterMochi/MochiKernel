#******************************************************************************#
#*                                                                            *#
#* src/tool/makeimg/Makefile                                                  *#
#*                                                                 2019/04/04 *#
#* Copyright (C) 2017-2019 Mochi.                                             *#
#*                                                                            *#
#******************************************************************************#
#******************************************************************************#
#* 設定                                                                       *#
#******************************************************************************#
# 実行ファイル
PROG = makeimg

# ソースコード
SRCS = makeimg.c

# リリースディレクトリ
RELEASE_DIR = ../../../release/tool
# ビルドディレクトリ
BUILD_DIR   = ../../../build
# ツールディレクトリ
OBJ_DIR     = $(BUILD_DIR)/obj/tool

# Cフラグ
CFLAGS  = -m32                   \
          -I../../include/kernel \
          -I$(BUILD_DIR)/include
# LDフラグ
LDFLAGS = -L$(BUILD_DIR)/lib
# LDライブラリフラグ
LDLIBS  = -lMLib


#******************************************************************************#
#* phonyターゲット                                                            *#
#******************************************************************************#
# コンパイル
.PHONY: all
all: $(OBJ_DIR) $(RELEASE_DIR)/$(PROG) Makefile

# 全生成ファイルの削除
.PHONY: clean
clean:
	-rm -rf $(RELEASE_DIR)/$(PROG)
	-rm -rf $(OBJ_DIR)/$(PROG)


#******************************************************************************#
#* 生成規則                                                                   *#
#******************************************************************************#
# ディレクトリ
$(OBJ_DIR):
	mkdir -p $@

# 実行ファイル
$(RELEASE_DIR)/$(PROG): $(SRCS) Makefile
	$(CC) $(CFLAGS) -o $(OBJ_DIR)/$(PROG) $(SRCS) $(LDFLAGS) $(LDLIBS)
	ln -sfr $(OBJ_DIR)/$(PROG) $@


#******************************************************************************#
