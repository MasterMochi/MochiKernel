#******************************************************************************#
#* src/tools/makedisk/Makefile                                                *#
#*                                                                 2017/06/29 *#
#* Copyright (C) 2017 Mochi.                                                  *#
#******************************************************************************#
#******************************************************************************#
#* マクロ設定                                                                 *#
#******************************************************************************#
# ベースディレクトリsrc/からの相対パス
CUR_DIR   = tools/makedisk

# バイナリ名
TOOL_NAME = makedisk

# ソースコード
SRCS      = makedisk.c

# Cフラグ
CFLAGS    = 


#******************************************************************************#
#* 自動設定マクロ                                                             *#
#******************************************************************************#
# ベースディレクトリパス
BASE_DIR  = $(shell pwd | sed -e 's/\/src\/$(subst /,\/,$(CUR_DIR))//')
# 生成ファイル格納先ディレクトリパス
TOOLS_DIR  = $(BASE_DIR)/build/tools


#******************************************************************************#
#* phonyターゲット                                                            *#
#******************************************************************************#
# サブディレクトリも含めたコンパイル
.PHONY: all
all: $(TOOLS_DIR) $(TOOLS_DIR)/$(TOOL_NAME) Makefile

# 全生成ファイルの削除
.PHONY: clean
clean:
	-rm -rf $(TOOLS_DIR)/$(TOOL_NAME)


#******************************************************************************#
#* 生成規則                                                                   *#
#******************************************************************************#
# ディレクトリ
$(TOOLS_DIR):
	mkdir -p $@

# バイナリ
$(TOOLS_DIR)/$(TOOL_NAME): $(SRCS) Makefile
	$(CC) $(CFLAGS) -o $@ $(SRCS)


#******************************************************************************#
