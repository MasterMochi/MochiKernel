#******************************************************************************#
#* src/tools/makeimg/Makefile                                                 *#
#*                                                                 2018/07/18 *#
#* Copyright (C) 2017-2018 Mochi.                                             *#
#******************************************************************************#
#******************************************************************************#
#* マクロ設定                                                                 *#
#******************************************************************************#
# ベースディレクトリsrc/からの相対パス
CUR_DIR   = tools/makeimg

# バイナリ名
TOOL_NAME = makeimg

# ソースコード
SRCS      = makeimg.c

# Cフラグ
CFLAGS    =


#******************************************************************************#
#* 自動設定マクロ                                                             *#
#******************************************************************************#
# ベースディレクトリパス
BASE_DIR  = $(shell pwd | sed -e 's/\/src\/$(subst /,\/,$(CUR_DIR))//')
# 生成ファイル格納先ディレクトリパス
TOOLS_DIR  = $(BASE_DIR)/build/tools


#******************************************************************************#
#* phonyターゲット                                                            *#
#******************************************************************************#
# サブディレクトリも含めたコンパイル
.PHONY: all
all: $(TOOLS_DIR) $(TOOLS_DIR)/$(TOOL_NAME) Makefile

# 全生成ファイルの削除
.PHONY: clean
clean:
	-rm -rf $(TOOLS_DIR)/$(TOOL_NAME)


#******************************************************************************#
#* 生成規則                                                                   *#
#******************************************************************************#
# ディレクトリ
$(TOOLS_DIR):
	mkdir -p $@

# バイナリ
$(TOOLS_DIR)/$(TOOL_NAME): $(SRCS) Makefile
	$(CC) $(CFLAGS) -o $@ $(SRCS)


#******************************************************************************#
